# TMP007 온도 센서 모듈

## 개요
TMP007은 정밀한 비접촉 온도 측정이 가능한 I2C 센서입니다. Qwiic Mux의 채널 7번에 연결되어 있습니다.

## 특징
- **I2C 주소**: 0x40 (기본)
- **Qwiic Mux 채널**: 7번
- **측정 범위**: -40°C ~ +125°C
- **정밀도**: ±0.5°C
- **샘플링 속도**: 4Hz (0.25초 간격)
- **비접촉 측정**: 적외선을 이용한 원격 온도 측정

## 파일 구조
```
tmp007/
├── tmp007.py          # TMP007 센서 제어 핵심 모듈
├── tmp007app.py       # TMP007 앱 (메인 프로세스)
└── README.md          # 이 파일
```

## 주요 기능

### 1. 온도 측정
- **객체 온도**: 비접촉으로 측정되는 대상 온도
- **다이 온도**: 센서 칩 자체의 온도
- **전압**: 센서 내부 전압 (마이크로볼트)

### 2. 데이터 전송
- **CommApp**: 1Hz 텔레메트리 데이터 전송
- **FlightLogic**: 4Hz 비행 제어용 데이터 전송

### 3. 로깅 시스템
- **센서 데이터**: CSV 형식으로 저장
- **오류 로그**: 상세한 오류 추적
- **강제 종료 대응**: 안전한 로그 저장

## 사용법

### 직접 테스트
```bash
cd tmp007
python3 tmp007.py
```

### 메인 시스템에서 실행
```bash
python3 main.py
```

## 데이터 형식

### 텔레메트리 데이터 (CommApp)
```
"object_temp,die_temp,voltage"
예: "25.50,26.20,1234.56"
```

### 비행 제어 데이터 (FlightLogic)
```
"object_temp,die_temp,voltage"
예: "25.50,26.20,1234.56"
```

## 로그 파일
```
logs/tmp007/
├── sensor_log.csv     # 센서 데이터 로그
├── error_log.csv      # 오류 로그
└── hk_log.csv         # 하우스키핑 로그
```

## 설정

### I2C 설정
- **주소**: 0x40
- **주파수**: 400kHz
- **샘플링**: 8샘플 평균, 4Hz

### 모터 제어 연동
FlightLogic에서 TMP007 데이터를 활용하여 모터 제어 로직에 반영할 수 있습니다:
- 고온 감지 시 모터 열림
- 온도 임계값 기반 제어

## 문제 해결

### 센서 인식 실패
1. I2C 연결 확인
2. Qwiic Mux 채널 7번 설정 확인
3. 전원 공급 확인

### 데이터 오류
1. 센서 초기화 대기 시간 확인
2. I2C 버스 충돌 확인
3. 온도 범위 확인 (-40°C ~ +125°C)

## 기술 사양

### TMP007 센서
- **제조사**: Texas Instruments
- **인터페이스**: I2C
- **해상도**: 14비트
- **전원**: 3.3V
- **소비 전류**: 240μA (활성 모드)

### 성능
- **응답 시간**: 133ms (8샘플 평균)
- **노이즈**: 0.1°C RMS
- **드리프트**: <0.1°C/년 